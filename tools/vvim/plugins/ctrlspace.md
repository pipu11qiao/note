# ctrlspace介绍 #

CtrlSpace 是一个功能很强大的vim插件，它主要是为vim编辑器提供如下的增强功能：

* tab页、buffer文件、普通文件管理
* 通过Go来快速文件搜索
* 工作空间（sessions）会话
* 给项目加入书签

## 类比说明 ##

CtrlSpace 是一个可以打开的vim窗口，通过C-Space键打开。窗口中展示了条目列表，可以通过按键j/k来移动，用CR键打开。

一般来说CtrlSpace列出了5中类型的列表

* Buffer list 缓冲文件列表
* File list 文件列表
* Tab list tab页列表
* Workspace list 工作区列表
* Bookmark list 书签列表

这些列表的关系通过一个简单的类比说明。把Vim想成一个写字桌，你开发的项目就像抽屉。**书签列表**简单的展示你常用的项目。

从抽屉中得到文档你需要一个**文件列表**，他帮助你快速浏览指定项目中的内容.当你定位并打开一个文件，这个文件就变成**缓冲区文件(buffer)**

一个buffer文件就像桌面上的一张纸。有时你有一张空白的纸（就是新打开的未保存的buffer），一旦被保存（放入抽屉）,buffer文件将变为普通文件。管理桌面上所有的buffer文件你需要一个 **缓冲文件列表**

到此为止我们的类比很简单。这个工作流程很直接,但是当我们运行大量的文件时很低效。如何优化呢？

答案是通过tab页面- CtrlSpace 的秘密武器。 每个tab包含了一个单独的buffer列表，与普通的vim不同的是，这些tab可以像桌面的buffer一样显示和控制。

通过tab页面你可以办到很多事情，举例来说：

* 相关buffer的分组
* 提取文件到别的tab页
* 给tab页有针对性的命名
* 复制和移动tab页

tab页面的用法在CtrlSpace中比在普通vim中更普遍。这是因为它主要负责分类buffer列表，因为你会创建大量的tab页。tab页可以在tab页列表中获取和管理

所有的缓冲文件，tab页和tab外观可以被保留成一个工作空间。 就像照相机给当前的桌面照的一张相片。一个项目可以创建多个工作区间。

## 用户交互 ##

CtrlSpace 包含了5中不同的列表：Buffer List(缓冲文件列表), File List(文件列表), Tab List(tab页列表), WorkSpace List（工作空间列表）, BookmarkList（书签列表）,其中的一些有额外的模式，当然在像vim这种模式编辑器中，这种使用方式对你来说不是问题。

对应访问不同列表的按键：

按键 | 效果
-- | --
h | 开关缓冲文件列表
H | 打开搜索模式缓冲文件列表
o | 开关文件列表
O | 打开搜索模式文件列表
l | 开关tab页列表
L | 打开搜索模式tab页列表
w | 开关工作空间列表
W | 打开搜索模式工作空间列表
b | 开关书签列表
B |  打开搜索模式书签列表

任何时候都可以BS（回退键）,返回普通ctrlspace窗口

该插件的用户交互是一个现实列表的窗口，在状态栏中包含重要的符号信息：

UTF8显示字符 | ASCII显示字符 | 列表类型 | 描述
-- | -- | -- | --
| `⌗`    | `#`     | 全部       | CtrlSpace 的标志符号 |
| `?`    | `?`     | 全部       | 帮助模式符号 |
| `›_‹`  | `[_]`   | 全部       | 搜索模式符号|
| `•`    | `SIN`   | 缓冲文件      | 单文件指示符     |
| `★`    | `VIS`   | 缓冲文件      | 查看模式指示符|
| `፨`    | `ALL`   | 缓冲文件      | 所有模式指示符       |
| `○`    | `FILE`  | 文件        | 文件列表指示符       |
| `⁺²`   | `+2`    | 缓冲文件/文件 | 下一个tab页指示符   |
| `⌕`    | `*`     | 缓冲文件/文件 | 放大模式指示符      |
| `▫▪▫`  | `-+-`   | tab 页        | tab页列表指示符        |
| `⬆`    | `|*|`   | 工作空间   | 工作空间加载模式指示符       |
| `⬇`    | `[*]`   | 工作空间   | 工作空间保存模式       |
| `♥`    | `BM`    | 书签    | 书签列表指示符   |

每个条目后面会有额外的指示符：

| UTF8显示字符 | ASCII显示字符 | 指示内容                         |
| ---- | ----- | --------------------------------- |
| `+`    | `+`     | 当前条目修改状态                     |
| `★`    | `*`     | 当前条目激活状态                      |
| `☆`    | `-`     | 当前条目可见或曾被激活 |

### 状态栏 ###

CtrlSpace 需要一个状态栏。如果你正在使用一个插件来定制状态栏是很机制的

### tab栏 ###

CtrlSpace 可以帮你设置一个定制的tab栏，需要g:CtrlSpaceUseTabline 设置为true。在tab栏上的tab内容如下展示（这格式也是用与tab页列表）

tab页号码 + 缓冲文件数量+ 是否修改 + 缓冲文件名称或tab页名称

1<sup>2</sup> + [readme.md]

加强tab页用法回事tab栏的效果打上折扣，因为窗口只能展示有限的tab标签，尤其是tab标签的名称很长

tab页列表是一个解决该问题的办法你甚至可以关闭tab栏

```
set showtabline=0

```
查看tab页列表,在插件窗口按下l键

### 4.3 项目根节点 ###

一些插件的特性需要项目文件夹来正常的运转，如果你首次打开文件列表在给定的vim运行的文件夹，她将会试着找出根路径。

首先在当前目录产找是否是根标记，所谓的根标记就是约定的根节点标记，比如.git所在的文件夹等等
然后会查找CWD规定的文件夹是否是当前文件夹
如果当前文件夹上面两种情况都不是，那就继续向父文件夹执行相同的查找方案。
如果最后没有发现符合要求的，就会让用户提供

找到的根目录路径会存储到.cs_cache 文件中，该文件是g:CtrlSpaceCacheDir设定的

如果向书签列表中添加了一个文件夹，该文件夹会被认为是根目录。有趣的是书签也将会被存储到上面的文件中。

## 列表介绍 ##

一般来说CtrlSpace列出了5中类型的列表

* Buffer list 缓冲文件列表
* File list 文件列表
* Tab list tab页列表
* Workspace list 工作区列表
* Bookmark list 书签列表

打开这些列表的按键上文已做了说明。

### Buffer list 缓冲文件列表###

展示来下下方的缓冲文件：
* 当前的tab页(单文件模式)
* 可见的缓冲文件(查看模式 按键 * )
* 所有的缓冲文件（所有模式 按键 a）

缓冲文件在Vim中有很多的特性。本插件只展示特性的缓冲文件：列出的并且有名字的。未命名的缓冲文件只有在当前tab页可以见或者含有未保存的改动的情况下可见。这个限制防止展示其他插件运行中产生的缓冲文件（不是用来展示的）

#### 单文件模式 ####

只展示和当前tab页相关的缓冲文件，相关的意思是在当前的tab页中至少一次被明确的显示。这些相关的换种文件被当前的tab页保存在要给缓冲文件列表中（在单文件模式下可见）。单文件指的是我们只浏览当前的tab页。
你也可以忘记当选中的缓冲文件(按f键），忘记的意思是解除绑定，使其不相关或让tab页忘记其存在。这些缓冲文件或许和其他的tab页有关也可能和任何tab页都没有关系。忘记以后，可以在全部模式下查看（a 键）
与任何tab页没有关系被遗忘的缓冲文件被称作遗弃文件，可以通过按键F将其删除。

#### 查看模式 ####

在单文件模式下标识哪些缓冲文件可见。例如tab页中有三个打开的文件，当前布局是上下分屏的两个窗口,按下*键进入查看模式只显示窗口中的两个文件。

在查看模式下，tab键能够来激活某个窗口（不是和enter键一样么）

#### 全部模式 ####

展示所有的buffer文件，当前vim程序中打开的buffer，有可能是其他项目文件中的正在编辑的buffer文件。



### File list 文件列表###

展示项目中从根目录开始所有的文件。如果要查找的文件在当前窗口不可见可以键入\/键切换快速查找模式。

r键是刷新当前列表，当你切换git分支时，别忘记刷新列表。

### Tab list tab页列表###

tab页在 CtrlSpace 中被认为是相关的缓冲文件的列表仍然和Vim中的tab页通向的规则。可以在不同的分割窗口展示缓冲文件，被移动，复制，删除，命名，提取，切换等等

该插件会让你很轻松的完成经典的tab操作通过键入l键

tab页，由于本插件的特性，比Vim自带的tab页用法使用起来很给力。Vim 作者 ，Bram Moolenaar在他的文章《七个高效的文本编辑习惯》提到过如果你需要10个tab页来工作表明你在犯某些错误。对CtrlSpace来说这不是问题，因为tab页被定位成缓冲文件的容器。

因此vim自带的tab栏来管理tab页面不那么得心应手，因为可能打开很多的tab页有些有很长的名称，会引起渲染问题

tab页可以被重命名（m键或-=键）包含多余一个的命名的tab页可以在键入c后弹出的确认信息中确认关闭。

### Workspace list 工作区列表##

该插件允许你保存和加载工作空间，一个工作空间就是一个打开的窗口，tab页和缓冲文件的集合。工作空间列表展示了一个项目中的可获得的工作空间，键入w打开工作空间列表，键入s来选择模式（在保存和加载模式切换），m键和=键来修改名字，d键删除工作空间

工作空间可以被认为是会话的同义词。具备这种同时管理这么多会话的能力可以创造出很多种有趣的使用方式。比如，你可以为现在的每一个特性开发创建一个工作空间，在工作空间之间切换很容易。

工作空间的记录保存在项目文件夹下的.cs_workspaces 文件中。它明确的名字和路径是可以配置的

### Bookmark list 书签列表###

书签可以被认作是最新换的项目列表。通过书签你可以很轻松的在项目之间切换

每个项目文件夹自然带有不同的文件列表，不同的工作空间列表等等。不存在什么事情阻止你在不同的项目之间混合缓冲文件。举例来说，你正在转到像一个项目，打开了配置文件，又返回该项目保持配置文件打开.

查看书签列表用b键，添加一个书签用a键，键入e键编辑当前目录，也可以通过m和=键来修改名称


