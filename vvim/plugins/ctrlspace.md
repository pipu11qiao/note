# ctrlspace介绍 #

CtrlSpace 是一个功能很强大的vim插件，它主要是为vim编辑器提供如下的增强功能：

* tab页、buffer文件、普通文件管理
* 通过Go来快速文件搜索
* 工作空间（sessions）会话
* 给项目加入书签

## 类比说明 ##

CtrlSpace 是一个可以打开的vim窗口，通过C-Space键打开。窗口中展示了条目列表，可以通过按键j/k来移动，用CR键打开。

一般来说CtrlSpace列出了5中类型的列表

* Buffer list 缓冲文件列表
* File list 文件列表
* Tab list tab页列表
* Workspace list 工作区列表
* Bookmark list 书签列表

这些列表的关系通过一个简单的类比说明。把Vim想成一个写字桌，你开发的项目就像抽屉。**书签列表**简单的展示你常用的项目。

从抽屉中得到文档你需要一个**文件列表**，他帮助你快速浏览指定项目中的内容.当你定位并打开一个文件，这个文件就变成**缓冲区文件(buffer)**

一个buffer文件就像桌面上的一张纸。有时你有一张空白的纸（就是新打开的未保存的buffer），一旦被保存（放入抽屉）,buffer文件将变为普通文件。管理桌面上所有的buffer文件你需要一个 **缓冲文件列表**

到此为止我们的类比很简单。这个工作流程很直接,但是当我们运行大量的文件时很低效。如何优化呢？

答案是通过tab页面- CtrlSpace 的秘密武器。 每个tab包含了一个单独的buffer列表，与普通的vim不同的是，这些tab可以像桌面的buffer一样显示和控制。

通过tab页面你可以办到很多事情，举例来说：

* 相关buffer的分组
* 提取文件到别的tab页
* 给tab页有针对性的命名
* 复制和移动tab页

tab页面的用法在CtrlSpace中比在普通vim中更普遍。这是因为它主要负责分类buffer列表，因为你会创建大量的tab页。tab页可以在tab页列表中获取和管理

所有的缓冲文件，tab页和tab外观可以被保留成一个工作空间。 就像照相机给当前的桌面照的一张相片。一个项目可以创建多个工作区间。

## 用户交互 ##

CtrlSpace 包含了5中不同的列表：Buffer List(缓冲文件列表), File List(文件列表), Tab List(tab页列表), WorkSpace List（工作空间列表）, BookmarkList（书签列表）,其中的一些有额外的模式，当然在像vim这种模式编辑器中，这种使用方式对你来说不是问题。

对应访问不同列表的按键：

按键 | 效果
-- | --
h | 开关缓冲文件列表
H | 打开搜索模式缓冲文件列表
o | 开关文件列表
O | 打开搜索模式文件列表
l | 开关tab页列表
L | 打开搜索模式tab页列表
w | 开关工作空间列表
W | 打开搜索模式工作空间列表
b | 开关书签列表
B |  打开搜索模式书签列表

任何时候都可以BS（回退键）,返回普通ctrlspace窗口

该插件的用户交互是一个现实列表的窗口，在状态栏中包含重要的符号信息：

UTF8显示字符 | ASCII显示字符 | 列表类型 | 描述
-- | -- | -- | --
| `⌗`    | `#`     | 全部       | CtrlSpace 的标志符号 |
| `?`    | `?`     | 全部       | 帮助模式符号 |
| `›_‹`  | `[_]`   | 全部       | 搜索模式符号|
| `•`    | `SIN`   | 缓冲文件      | 单文件指示符     |
| `★`    | `VIS`   | 缓冲文件      | 查看模式指示符|
| `፨`    | `ALL`   | 缓冲文件      | 所有模式指示符       |
| `○`    | `FILE`  | 文件        | 文件列表指示符       |
| `⁺²`   | `+2`    | 缓冲文件/文件 | 下一个tab页指示符   |
| `⌕`    | `*`     | 缓冲文件/文件 | 放大模式指示符      |
| `▫▪▫`  | `-+-`   | tab 页        | tab页列表指示符        |
| `⬆`    | `|*|`   | 工作空间   | 工作空间加载模式指示符       |
| `⬇`    | `[*]`   | 工作空间   | 工作空间保存模式       |
| `♥`    | `BM`    | 书签    | 书签列表指示符   |

每个条目后面会有额外的指示符：

| UTF8显示字符 | ASCII显示字符 | 指示内容                         |
| ---- | ----- | --------------------------------- |
| `+`    | `+`     | 当前条目修改状态                     |
| `★`    | `*`     | 当前条目激活状态                      |
| `☆`    | `-`     | 当前条目可见或曾被激活 |

### 状态栏 ###

CtrlSpace 需要一个状态栏。如果你正在使用一个插件来定制状态栏是很机制的

### tab栏 ###

CtrlSpace 可以帮你设置一个定制的tab栏，需要g:CtrlSpaceUseTabline 设置为true。在tab栏上的tab内容如下展示（这格式也是用与tab页列表）

tab页号码 + 缓冲文件数量+ 是否修改 + 缓冲文件名称或tab页名称

1<sup>2</sup> + [readme.md]

加强tab页用法回事tab栏的效果打上折扣，因为窗口只能展示有限的tab标签，尤其是tab标签的名称很长

tab页列表是一个解决该问题的办法你甚至可以关闭tab栏

```
set showtabline=0

```
查看tab页列表,在插件窗口按下l键

### 4.3 项目根节点 ###

一些插件的特性需要项目文件夹来正常的运转，如果你首次打开文件列表在给定的vim运行的文件夹，她将会试着找出根路径。

首先在当前目录产找是否是根标记，所谓的根标记就是约定的根节点标记，比如.git所在的文件夹等等
然后会查找CWD规定的文件夹是否是当前文件夹
如果当前文件夹上面两种情况都不是，那就继续向父文件夹执行相同的查找方案。
如果最后没有发现符合要求的，就会让用户提供

找到的根目录路径会存储到.cs_cache 文件中，该文件是g:CtrlSpaceCacheDir设定的

如果向书签列表中添加了一个文件夹，该文件夹会被认为是根目录。有趣的是书签也将会被存储到上面的文件中。

## 列表介绍 ##

一般来说CtrlSpace列出了5中类型的列表

* Buffer list 缓冲文件列表
* File list 文件列表
* Tab list tab页列表
* Workspace list 工作区列表
* Bookmark list 书签列表

打开这些列表的按键上文已做了说明。

### Buffer list 缓冲文件列表###

展示来下下方的缓冲文件：
* 当前的tab页(单文件模式)
* 可见的缓冲文件(查看模式 按键 * )
* 所有的缓冲文件（所有模式 按键 a）

缓冲文件在Vim中有很多的特性。本插件只展示特性的缓冲文件：列出的并且有名字的。未命名的缓冲文件只有在当前tab页可以见或者含有未保存的改动的情况下可见。这个限制防止展示其他插件运行中产生的缓冲文件（不是用来展示的）

#### 单文件模式 ####

只展示和当前tab页相关的缓冲文件，相关的意思是在当前的tab页中至少一次被明确的显示。这些相关的换种文件被当前的tab页保存在要给缓冲文件列表中（在单文件模式下可见）。单文件指的是我们只浏览当前的tab页。
你也可以忘记当选中的缓冲文件(按f键），忘记的意思是解除绑定，使其不相关或让tab页忘记其存在。这些缓冲文件或许和其他的tab页有关也可能和任何tab页都没有关系。忘记以后，可以在全部模式下查看（a 键）
与任何tab页没有关系被遗忘的缓冲文件被称作遗弃文件，可以通过按键F将其删除。

#### 查看模式 ####

在单文件模式下标识哪些缓冲文件可见。例如tab页中有三个打开的文件，当前布局是上下分屏的两个窗口,按下*键进入查看模式只显示窗口中的两个文件。

在查看模式下，tab键能够来激活某个窗口（不是和enter键一样么）

#### 全部模式 ####

展示所有的buffer文件，当前vim程序中打开的buffer，有可能是其他项目文件中的正在编辑的buffer文件。



### File list 文件列表###
### Tab list tab页列表###
### Workspace list 工作区列表###
### Bookmark list 书签列表###







