### Vim 使用正则表达式

vim 中使用正则一般是两种情况查询和替换,其实两者基本一致都是在执行正则查询功能，替换是在查询基础上把匹配到的字符串给替换掉(可能会用到正则分组的功能)

#### 语法

##### 查找

```
/正则
```
##### 替换

```
:[range]s/正则/替换的字符/[flags]
```
* range:搜索范围，如果没有指定范围，则作用于但前行。

    1. :1,10s/from/to/ 表示在第1到第10行（包含第1，第10行）之间搜索替换；
    2. :10s/from/to/ 表示只在第10行搜索替换；
    3. :%s/from/to/ 表示在所有行中搜索替换；
    4. :1,$s/from/to/ 同上。

* flags 有如下四个选项

    1. c confirm，每次替换前询问；
    2. e error， 不显示错误；
    3. g globle，不询问，整行替换。如果不加g选项，则只替换每行的第一个匹配到的字符串；
    4. i ignore，忽略大小写。
这些选项可以合并使用，gi表示不区分大小写，整行替换。

#### vim正则表达式

##### 元字符
* 普通元字符

元字符 | 说明
-- | --
. | 匹配任意字符
[abc] | 匹配abc中的任意一个,[]是集合的意思，里面可以有简写，0-9 表示0到9的数字，a-z表示a到z的小写字母，A-Z表示A到Z的大写字母
[^abc] | 匹配非abc的字符的任意一个,[^]是非...的集合,
\d | 匹配数字字符,相当于[0-9]
\D | 匹配非数字字符，相当于[^0-9]
\x | 匹配16进制数字(10进制的1-16)，相当于[0-9a-fA-F]
\X | 匹配非16进制数字，相当于[^0-9a-fA-F]
\w | 匹配单字字符，字母、数字、下划线，相当于[0-9a-zA-Z_]
\W | 匹配非单字字符,相当于[^0-9a-zA-Z_]
\s | 匹配一个空白字符，包括空格符，制表符，换行符，换页符
\S | 匹配一个非空白字符

* 因为元字符(或表达式使用)占用，需要转义的普通字符

元字符 | 说明
-- | --
\\* | 匹配 *
\\. | 匹配 。
\\\ | 匹配 \
\\/ | 匹配 /
\\[ | 匹配 [

* 表示数量的元字符

元字符 | 说明
-- | --
* | 任意多个
\\+ | 一个或多个
\\? | 0个或一个
\\{n,m} | n到m个
\\{n} | n个
\\{n,} | 大于等于n个
\\{,m} | 小于等于m个

* 表示位置的元字符

元字符 | 说明
-- | --
^ | 行首
$ | 行尾
\\< | 单词开始
\\> | 单词结束

#### 其他规则

\\| 表示或者

##### 分组匹配

在正规表达式中使用 \( 和 \) 符号括起正规表达式，即可在后面使用\1、\2 等变量来访问 \( 和 \) 中的内容。

#### 例子
%s/webpackChunkName:\s\+['"]\([^a]\S\+\)['"]/webpackChunkName: "async_\1"/g
%s/\(#F94852\|red\)/@brand-error/g



#### 参考

1. [Vim查找替换及正则表达式的使用](http://tanqisen.github.io/blog/2013/01/13/vim-search-replace-regex/)
1. [Vim查找替换及正则表达式的使用](http://tanqisen.github.io/blog/2013/01/13/vim-search-replace-regex/)

