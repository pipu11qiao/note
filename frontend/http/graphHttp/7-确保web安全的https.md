在http协议中有可能存在信息窃听或身份伪装等安全问题，使用https通信机制可以有效地防止这些问题。

#### 7.1 http的缺点 ####

* 通信使用明文，内容可能被窃听
    在互联网的任一个环节都可以劫持http的请求和响应报文。加密是对内容加密，劫持者没法获取内容，但是加密后的报文是可以看到的。 通过抓包或嗅探器工具（Packet Capture Sniffer）
* 不验证通信方的身份，因此可能遭遇伪装
    http协议中的请求和响应不会对通信方进行确认。也即是说存在服务器是否就是发送请求中URI真正指定的主机，返回的响应是否真的返回到实际提出请求的客户端等类似问题
    * 任何人都可发起请求
        拒绝服务攻击 DoS Denial of Service
    * 查明对手的证书
        证书是由值得信任的第三方机构颁发，用以证明服务器和客户端是实际存在的。伪造证书从技术角度来说是异常困难的一件事。
* 无法证明报文的完整性，所以有可能篡改
    所谓的完整性是指信息的准确度。无法证明其完整性，通常也就意味着无法判断信息是否准确。
    * 接收到的内容可能有误
        中间人攻击 Man in the Middle attack MITM
        即使是MD5等手段也可能被篡改
其他未加密的协议中也会存在这类问题。

##### 7.2 http 加上加密处理和认证以及完整性保护后即是https #####
加密和认证的http,解决上面提到的http问题
##### https 是身披ssl外壳的http #####
https 并非是应用层的新协议，只是http通信接口部分用ssl(secure socket layer)和tls(transport layer security)协议替代而已。

ssl 是当今世界应用最广泛的网络安全技术

##### 7.2.3 相互交换密钥的公开密钥加密技术 #####

公开密钥加密（Public-key cryptography）的加密处理方式。
加密和解密都会用到密钥。 
*  共享密钥加密的困境
    加密和解密同用一个密钥的方式成为共享密钥加密，也被叫做对称密钥加密。
    以共享秘钥的方式加密是必须将密钥也发给对方。可究竟怎样才能安全的转交以及如何安全保管接收到的密钥
* 使用亮吧密钥的公开密钥加密
    公开密钥很好地解决了共享密钥的困难
    公开密钥使用一种非对称的密钥，一把叫做私有密钥，一把叫做公开密钥。私有密钥不能让其他任何人知道，公开密钥则可以随意发布，任何人都可以获得。
    使用对方的公开密钥加密，接收到报文后，使用私有密钥解密
* https 使用混合的加密机制
    公开密钥加密和共享密钥加密相比，处理速度慢。
    在交换密钥环节使用公开密钥加密方式，之后建立通信交换报文阶段则使用共享密钥加密方式。

##### 7.2.4 证明公开密钥正确性的证书 #####

公开密钥存在的问题： 无法证明公开密钥本身就是货真价实的公开密钥。
为了解决上述问题，使用由数字证书认证机构（CA Certificate Authority）和其相关机关颁发的公开密钥证书。

* 可证明组织真实性的EV SSL证书
* 用以确认客户端的客户端证书
* 认证机构信誉第一
* 由自认证机构颁发的证书成为自签名证书

##### 7.2.5 https 安全通信机制 #####

https 通信步骤
* 完成 第一次握手 相互hello，服务器返回公开密钥
* 使用公钥发送共享密钥并进行一次验证，ok 建立ssl链接完成
* http通信
* 客户端发送断开信号


* ssl 和 tls tls 是在ssl为原型开发的协议 ssl3.0 tls 1.0
* ssl 速度慢么 https比http慢2到100倍

需要验证 
需要加密解密

##### 为什么不一直使用https #####

加密通信会消耗更多的CPU及内存资源
证书是要花钱的

