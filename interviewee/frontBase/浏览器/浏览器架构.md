#### 浏览器架构

程序的基本构成和操作系统之间的交互

这里我们以 Chrome 多进程架构介绍，在 Chrome 中存在这不同种类型的进程，它们各司其职。

* Browser Process
* Renderer Process
* GPU Process
* Plugin Process

####  Browser Process
浏览器进程负责管理 Chrome 应用本身，包括地址栏、书签、前进和后退按钮。同时也负责可不见的功能，比如网络请求、文件按访问等，也负责其他进程的调度。

####  Renderer Process

渲染进程负责站点的渲染，其中也包括 JavaScript 代码的运行，web worker 的管理等。

#### Plugin process
插件进程负责为浏览器提供各种额外的插件功能，例如 flash。

#### GPU 进程（GPU process）

##### 多进程的好处

当我们访问一个站点时，渲染进程会负责运行站点的代码，渲染站点的页面，同时响应用户的交互动作，当我们在 Chrome 中打开三个页签同时访问三个站点时，如果其中一个没有响应，我们可以关闭它然后使用其他的页签，这是因为 Chrome 为每个站点创建一个独立的渲染进程，专门处理当前站点的渲染工作。如果所有的页面运行在同一个进程中，当有一个页面没有响应时，所有的页面就都卡住了。

另一个好处是，借助操作系统对进程安全的控制，浏览器可以将页面放置在沙箱中，站点的代码可以运行在隔离的环境中，保证核心进程的安全。

虽然多进程的架构优于单进程架构，但由于进程独享自己的私有内存，以渲染进程为例，虽然渲染的站点不同，但工作内容大体相似，为了完成渲染工作它们会在自己的内存中包含相同的功能，例如 V8 引擎（用于解析和运行 Javascript），这意味着这部分相同的功能需要占用每个进程的内存空间。为了节省内存，Chrome 限制了最大进程数，最大进程数取决于硬件的能力，同时当使用多个页签访问相同的站点时浏览器不会创建新的渲染进程。




利用 iframe 我们可以在同一个页面访问不同站点的资源，但从安全的角度考虑，同源策略不允许一个站点在未得到同意的情况下访问其他站点的资源，所以从 Chrome 67 开始每个站点由独立的渲染进程处理被默认启用。

浏览器进程负责处理除了渲染外的大部分工作，浏览器进程包括几个线程：

UI 线程负责绘制工具栏中的按钮、地址栏等。

网络线程负责从网络中获取数据。

存储线程负责文件等功能。



当我们在地址栏中输入一个地址时，浏览器进程中的 UI 线程最先得知这个动作，并开始处理。
