### 作用域
##### 1. 什么是作用域

   作用域是在运行时代码中的某些特定部分中变量和资源的可访问性。换句话说，作用域决定了代码区块中变量和其他资源的可见性。
   作用域就是一个独立的地盘，让变量不会外泄、暴露出去。也就是说作用域最大的用处就是隔离变量，不同作用域下同名变量不会有冲突。

##### 2.   

* 全局作用域
* 函数作用域
* 块级作用域

### 作用域链

1. 什么是自由变量

当前作用域没有定义的变量

2. 什么是作用域链   
   
   如果父级也没呢？再一层一层向上寻找，直到找到全局作用域还是没找到，就宣布放弃。这种一层一层的关系，就是 作用域链 。
   
3. 自由变量的取值   

```javascript
var x = 10
function fn() {
  console.log(x)
}
function show(f) {
  var x = 20
  (function() {
    f() //10，而不是20
  })()
}
show(fn)
```

要到创建这个函数的那个域。作用域中取值，这里强调的是创建，而不是调用。 这既是所谓的静态作用域

```javascript

var a = 10
function fn() {
  var b = 20
  function bar() {
    console.log(a + b) //30
  }
  return bar
}
var x = fn(),
  b = 200
x() //bar()

```

### 作用域与执行上下文

我们知道JavaScript属于解释型语言，JavaScript的执行分为：解释和执行两个阶段,这两个阶段所做的事并不一样：

##### 解释阶段：

* 词法分析
* 语法分析
* 作用域规则确定

##### 执行阶段：

* 创建执行上下文
* 执行函数代码
* 垃圾回收

JavaScript解释阶段便会确定作用域规则，因此作用域在函数定义时就已经确定了，而不是在函数调用时确定，但是执行上下文是函数执行之前创建的。执行上下文最明显的就是this的指向是执行时确定的。而作用域访问的变量是编写代码的结构确定的。
作用域和执行上下文之间最大的区别是：
执行上下文在运行时确定，随时可能改变；作用域在定义时就确定，并且不会改变。
一个作用域下可能包含若干个上下文环境。有可能从来没有过上下文环境（函数从来就没有被调用过）；有可能有过，现在函数被调用完毕后，上下文环境被销毁了；有可能同时存在一个或多个（闭包）。同一个作用域下，不同的调用会产生不同的执行上下文环境，继而产生不同的变量的值。

